## 异常值检测

### 基于距离的方法

- Z-Score方法
  标准分数法，是一种用于识别异常值的统计技术。这种方法通过测量一个数据点与平均值的距离，并将其与标准差相比较来工作。Z-Score是一个表示数据点距离平均数多少个标准差的数值。**Z-Score方法在处理具有高斯（正态）分布特征的数据时特别有效。**

- KNN
  使用K-NN算法检测异常值是一种有效的方法，尤其适用于那些需要考虑数据点之间相互关系的场景。K-NN在检测异常值时的基本思想是：如果一个数据点的最近邻（即最接近的K个点）与它相距较远，则该点可能是异常值。
**K-NN方法在检测异常值时的优势在于它不需要假设数据遵循特定的分布，这使得它适用于各种不同类型的数据集。然而，这种方法的效率在高维数据集中可能会降低，因为在高维空间中，计算距离变得复杂且不直观。**

### 基于密度的方法
- LOF离群点检测
  LOF（Local Outlier Factor）算法是一种用于检测异常值（离群点）的算法，特别适用于具有高度聚集性质的数据集。它基于一个核心概念：离群点是那些在其邻域内稀疏分布的点。
```
1.计算局部密度：
  对于每个点，找出其K个最近邻居（这里的K与K-NN中的K类似，但在LOF中通常称为MinPts）。
  计算每个点到其邻居的距离，这些距离的平均值用来估计该点的局部密度。
2.计算局部离群因子（LOF）：
  对于每个点，比较它的局部密度与其邻居的局部密度。
  LOF分数是该点密度与其邻居密度的比值的平均值。如果一个点的密度远低于其邻居的密度，它的LOF分数将高于1。
3.标记异常值：
  根据LOF分数来判定异常值。通常，分数显著高于1的点被认为是异常值。
```
### 基于机器学习的方法
- 孤立森林
  孤立森林（Isolation Forest）是一种有效的异常值检测算法，特别适用于高维数据集。它基于这样一个简单的原理：异常值通常是稀有的并且与大多数其他数据点有显著的不同，因此更容易被“孤立”。
 ```
 随机抽样：
从数据集中随机抽取一定数量的样本。这些样本被用来构建孤立树（Isolation Trees）。
构建孤立树：
对于每棵树，算法随机选择一个特征并随机选择一个分割值。基于这个特征和分割值，数据集被分割成两部分。这个过程递归进行，直到每个数据点都被“孤立”（即每个点都成为了树中的一个叶子节点）或达到了预设的树深度限制。
路径长度：
在每棵孤立树中，每个点的路径长度被记录下来。路径长度是指从树的根节点到达该点所经过的边的数量。异常值由于更容易被孤立，通常会有更短的路径长度。
计算异常得分：
通过对一个点在多棵孤立树中的路径长度进行平均，可以计算出该点的异常得分。得分越高，该点越可能是异常值。
判断异常值：
根据设定的阈值或者通过比较所有点的异常得分，可以判定哪些点是异常值。
```
- 自编码器
  自编码器（Autoencoder）是一种基于神经网络的算法，通常用于数据的降维和特征学习。由于其能力在于学习数据的正常分布，自编码器也被用于异常值检测。在这种应用中，自编码器通过学习重构正常数据的特征，然后利用重构误差来识别异常值。以下是使用自编码器进行异常值检测的基本步骤：
```
自编码器结构：
    自编码器通常包括两部分：编码器（Encoder）和解码器（Decoder）。
    编码器将输入数据压缩成一个低维表示（称为编码）。
    解码器从这个低维表示重构原始输入数据。
训练自编码器：
    使用正常数据（没有异常值的数据）训练自编码器。
    训练的目标是最小化输入数据和重构数据之间的差异，通常使用均方误差作为损失函数。
计算重构误差：
    在训练完成后，用自编码器对新的数据进行编码和解码。
    计算每个数据点的重构误差，即输入数据和重构数据之间的差异。
异常值判定：
    基于重构误差来判定数据是否异常。如果一个数据点的重构误差显著高于大多数其他数据点的误差，那么它可能是一个异常值。
```

## 时序序列
- 预测趋势：趋势是时间序列数据中长期的上升或下降模式。例如，一个公司的年销售额可能会显示出持续增长的趋势。
- 季节性：季节性是时间序列数据中的周期性波动，这些波动通常与季节或其他固定的时间间隔有关。例如，零售业的销售额可能在节假日期间显著增加。
- 周期性：周期性是时间序列数据中的波动，这些波动的周期不固定，与季节性不同。例如，经济周期就是一种周期性。
- 随机（或不规则）波动：这是时间序列中不可预测的部分，不能被趋势、季节性或周期性解释。
- 自相关性：自相关性是时间序列中相邻观察值之间的相关性。例如，今天的股票价格可能与昨天的股票价格高度相关。
- 平稳性：平稳时间序列的统计特性（如均值、方差等）不随时间变化。许多时间序列模型都假设数据是平稳的，或可以通过某种转换（如差分）变为平稳。
- 滞后值：滞后值是过去的数据值。例如，在t-1时刻的值就是在t时刻的滞后值。滞后值在许多时间序列模型（如自回归模型）中都有应用。
### 特征工程
- 滞后特征：滞后特征是用过去的数据作为新的特征。例如，我们可以创建一个新的特征，表示在过去一天、一周或一月的数据。
- 滑动窗口统计：滑动窗口统计是对过去一段时间内的数据进行统计分析，如求和、平均、最大值、最小值等。
- 时间特征：时间特征是从时间戳中提取的特征，如年份、月份、一周的第几天、一天的第几小时等。
- 趋势特征：趋势特征是表示数据的长期趋势，可以通过线性回归或其他方法来捕捉。
- 季节性特征：季节性特征是表示数据的周期性波动，可以通过傅立叶变换或其他方法来捕捉。
### 预测方法
我们可以将时间序列预测方法分为几个主要类别，包括单变量预测、多变量预测，以及其他一些其它的预测方法。

单变量时间序列预测：单变量时间序列预测是最常见的预测方法，它只依赖于一个单一的时间序列数据源。这种类型的预测主要关注如何根据过去的数据来预测未来的数据。常见的单变量预测方法包括自回归移动平均模型（ARIMA）、指数平滑模型、随机森林和深度学习模型等。

多变量时间序列预测：与单变量预测相比，多变量时间序列预测使用两个或更多的相关时间序列来进行预测。这种方法可以帮助我们更好地理解和利用不同变量之间的相互关系。多变量预测方法包括向量自回归模型（VAR）、协整模型和多变量深度学习模型等。

除了上述分类，还有一些其他类型的时间序列预测方法：

混合模型预测：混合模型预测是将多个预测模型的结果结合起来，以得到更好的预测结果。这种方法可以利用不同模型的优点，并减少模型偏差的影响。例如，可以将ARIMA模型的预测结果与深度学习模型的预测结果结合起来。

频域方法预测：频域方法预测是通过分析数据的频率成分来进行预测。这种方法特别适用于具有明显周期性的数据。例如，傅立叶变换就是一种常用的频域分析方法。

异常检测预测：异常检测预测是一种旨在识别和预测异常时间点的方法。这种方法常用于信用卡欺诈检测、网络入侵检测等场景。
